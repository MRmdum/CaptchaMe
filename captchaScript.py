import requests
import base64
from bs4 import BeautifulSoup
from PIL import Image

##connection to web page

url = "http://challenge01.root-me.org/programmation/ch8/"
page = requests.get(url)

#parsing
soup = BeautifulSoup(page.content,"html.parser")
results = soup.find_all('img')[0].attrs['src'].split(",")[1]

#decoding base 64 + download
with open("imageToSave.png", "wb") as fh:
    fh.write(base64.decodebytes(results.encode('utf-8')))


#captcha solving part#

im = Image.open('imageToSave.png')
pixelMap = im.load()

img = Image.new( im.mode, im.size)
pixelsNew = img.load()
for i in range(img.size[0]):
    for j in range(img.size[1]):
        if pixelMap[i,j] == (4,4,4,255): #rgba color not sure about the last one
            pixelMap[i,j] = (0,0,0,255)
        else:
            pixelsNew[i,j] = pixelMap[i,j]
img.show()

###

# urlImg = "http://challenge01.root-me.org/programmation/ch8/data:image/png;base64,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"